<!-- Copyright (C) 2020-2021 Oleksandr Masniuk -->
<!-- SPDX-License-Identifier: AGPL-3.0-or-later -->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pulse</title>
</head>
<body>
<section th:id="|${idPrefix}-${region}|" th:class="|col-lg-${autoHeight == 'true' ? '6' : '12'} mb-3|" th:fragment="stats-league-region (region, title, idPrefix, legendDisplay, autoHeight)">
    <h4><span th:text="${title}"></span>, distribution by league,
        <span th:switch="${region}">
            <span th:case="global">Global</span>
            <img th:case="*" th:src="@{'/static/icon/flag/' + ${region} + '.svg'}" th:alt="${region}" th:title=${region} class="table-image-long"/> (<span class="season-current"></span>)
        </span>
    </h4>
    <table
            th:id="|${idPrefix}-${region}-table|"
            th:class="|chartable ${region == 'global' ? '' : 'table-race-league-region'}|"
            data-chart-type="bar"
            data-chart-tooltip-percentage="false"
            th:data-chart-id="|${idPrefix}-${region}-chart|"
            data-chart-x-title="League" data-chart-y-title="%"
            th:data-chart-legend-display="${legendDisplay}"
            th:data-chart-maintain-aspect-ratio="${autoHeight}"
    >
        <thead><tr></tr></thead>
        <tbody><tr></tr></tbody>
    </table>
    <div th:class="|container-chart ${!autoHeight ? 'container-chart-fixed-height' : ''}|"><canvas th:id="|${idPrefix}-${region}-chart|" class="c-chart"></canvas></div>
</section>
<section class="col-lg-6 mb-3"
         th:fragment="stats-race-league-region (region)"
         th:replace="~{fragments/section :: stats-league-region(${region}, 'Games played by race', 'games-played-race-league', 'true', 'true')}">
</section>
<section class="col-lg-6 mb-3"
         th:fragment="stats-match-up (region)"
         th:replace="~{fragments/section :: stats-league-region(${region}, 'Match-up stats', 'stats-match-up', 'false', 'false')}">
</section>
<section th:id="${id}" th:class="|col-lg-${autoHeight == 'true' ? '6' : '12'} mb-3|" th:fragment="statsFull (id, title, titleY, type, legendDisplay, autoHeight)">
    <h4 th:replace="${title}"></h4>
    <table
            th:id="|${id}-table|"
            class="chartable"
            th:data-chart-type="${type}"
            th:data-chart-id="|${id}-chart|"
            data-chart-x-title="Date" th:data-chart-y-title="${titleY}"
            th:data-chart-legend-display="${legendDisplay}"
            th:data-chart-maintain-aspect-ratio="${autoHeight}"
    >
        <thead><tr></tr></thead>
        <tbody><tr></tr></tbody>
    </table>
    <div th:class="|container-chart ${!autoHeight ? 'container-chart-fixed-height' : ''}|"><canvas th:id="|${id}-chart|" class="c-chart"></canvas></div>
</section>
<section th:id="${id}" class="col-lg-6 mb-3" th:fragment="stats (id, title, titleY, type)"
         th:replace="~{fragments/section :: statsFull(${id}, ${title}, ${titleY}, ${type}, 'true', 'true')}">>
</section>
</body>
</html>
